<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- <link rel="stylesheet" href="styles.css" /> -->
    <!-- <script src="./main.js" async defer></script> -->
    <style>
    div { 
        display: flex;
        justify-content: center;
    }
        
    p {
        margin: 0 20px;
        padding: 10px;
    }
    
    body {
        background-image: url(./katie-hong--9uey7asjS0-unsplash.jpg);
        background-repeat: no-repeat;
        background-size: cover; 
    }
    
    section { 
        text-align: center;
        width: 200px;
        margin: 100px auto; 
    }
    
    button { 
        margin: 30px;
        border: solid rgb(88, 86, 85) 2px;
    }
    
    .flying { 
        height: 50px;
    }
    
    #mother { 
        width: 100px;
    }</style>
    <title>Aliens</title>
</head>
<body>
    
        <div>
            <p id="ship1"><img src="./saucer.png" id="mother"></img></p>
        </div>

        <div>
            <p id="ship2"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship3"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship4"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship5"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship6"><img src="./saucer.png" class="flying"></img></p>
        </div>

        <div>
            <p id="ship7"><img src="./saucer.png" class="flying"></img></img></p>
            <p id="ship8"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship9"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship10"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship11"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship12"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship13"><img src="./saucer.png" class="flying"></img></p>
            <p id="ship14"><img src="./saucer.png" class="flying"></img></p>
        </div>
        <section>
            <button class="trigger" onclick="shootAlien()">Fire!</button>
            <form class="trigger" method="link" action="javascript:document.location.reload()">
                <button type="submit" onClick="this.value = 'updating...'">Start a new game</button>

            </form>
        </section>
<script>
class ship { 
    constructor(health, shotImpact, name){
    
    this.health = health;
    this.shotImpact = shotImpact;
    this.name = name;
    }

    takesHit() { 
    this.health = this.health - this.shotImpact;
    }

    dead() { 
    document.getElementById(this.name).style.display = "none";
}
}

class motherShip extends ship{
    
    kamikaze() { 
     const allDivs = document.querySelectorAll("div");
     console.log(allDivs);
     allDivs.forEach((div) => {
        div.style.display = "none";
     }) 
     //.style.display = "none";  
    }
}

const ship1 = new motherShip(100, 9, "ship1");
const ship2 = new ship(80, 10, "ship2");
const ship3 = new ship(80, 10, "ship3");
const ship4 = new ship(80, 10, "ship4");
const ship5 = new ship(80, 10, "ship5");
const ship6 = new ship(80, 10, "ship6");
const ship7 = new ship(45, 12, "ship7");
const ship8 = new ship(45, 12, "ship8");
const ship9 = new ship(45, 12, "ship9");
const ship10 = new ship(45, 12, "ship10");
const ship11 = new ship(45, 12, "ship11");
const ship12 = new ship(45, 12, "ship12");
const ship13 = new ship(45, 12, "ship13");
const ship14 = new ship(45, 12, "ship14");

const ships = [ship1, ship2, ship3, ship4, ship5, ship6, ship7, ship8, ship9, ship10, ship11, ship12, ship13, ship14]

// const ship1 = new motherShip(100);
// ships.takesHit();
// console.log(ship1);

const displayShips = () => { 
    ships.forEach(ship => {
    // console.log(ship);
    const id = ship.name;
    document.getElementById(id).innerHTML = `${ship.name}: ${ship.health}` 
})}

const shootAlien = () => {
    const randomShip = Math.floor(Math.random() * ships.length)
    ships[randomShip].takesHit();
    if (ships[randomShip].health < 1){
        ships[randomShip].dead();
    }
    if (ships[0].health < 1) { 
        ships[0].kamikaze();
    }
    displayShips();    
    // console.log(ships[randomShip].health);
    // document.getElementById(id).innerHTML = `${ships.health}`;
}

// const filterAliveShips = (input) => { 
//     if(this.health >= 1){
//         return true;
//     } else
//     return false;
// }
</script>
</body>
</html>